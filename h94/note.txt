[このプログラムのどこにバグがあるのでしょうか？]
ソースファイル：
 lock.c main.c lock.sh lock.txt

・大域変数のカウンタcounterを２つのスレッドから1000万回ずつインクリメント
する処理を、Petersonのアルゴリズムで排他する(lock.c)
カウンタのインクリメントは、①メモリからレジスタにロード、②レジスタ上で
インクリメント、③レジスタからメモリにストア、の３命令で実行されているので
(lock.s)、この単純な処理でも排他が必要となる
実行すると、最終的なカウンタの値は期待される値：2000万とならない(lock.txt)


[メモリバリア命令]
ソースファイル：
 fence.c main.c fence.sh fence.txt

・Petersonのアルゴリズムにおいて、lock_array[me]に１を書き込む処理と、
lock_array[other]を読み込む処理の間にメモリバリア命令を挿入する
(fence.txt)
これを行うと、カウンタの最終的な値は期待される2000万となる
また、main.cのループ内部と、routine関数の wait a moment のコメントの
箇所にディレイを入れないと、lock_array[me]が1となる時間の比率が高くなり
過ぎて、相手のロックが取れずに処理が進まなくなる。
